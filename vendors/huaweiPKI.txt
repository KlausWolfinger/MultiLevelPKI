### procedure to install x509 certificates on Huawei router / Switches

pki rsa local-key-pair create cli_rsa exportable 

pki export rsa-key-pair cli_rsa pem cli_rsa.pem password PASSWORD

ftp
open FTP.SRV.IP.ADD
put cli_rsa.pem

pki entity cli_entity
country DE
state Bavaria
organization CLIGURU
organization-unit CLIGURU
common-name wifi.cliguru.com

pki realm cli_realm
entity cli_entity
rsa local-key-pair cli_rsa

pki enroll-certificate realm cli_realm pkcs10 filename cli_cer_req

ftp
open FTP.SRV.IP.ADD
put cli_cer_req

After CA signed your certificate with you CSR and sent it to you with all CA chain, put all certificates to AC again.

pki import-certificate local realm cli_realm pem filename wifi_cliguru_com.pem replace
pki import-certificate ca realm cli_realm pem filename COMODORSADomainValidationSecureServerCA.pem replace 
pki import-certificate ca realm cli_realm pem filename COMODORSAAddTrustCA.pem replace
pki import-certificate ca realm cli_realm pem filename AddTrustExternalCARoot.pem replace

ssl policy cli_ssl type server
ciphersuite rsa_aes_128_cbc_sha rsa_aes_256_sha256 rsa_aes_128_sha256
version tls1.0 tls1.1 tls1.2
pki-realm cli_realm

http secure-server ssl-policy cli_ssl
http secure-server enable

portal local-server ip PORTAL.INTERFACE.IP.ADDRESS
portal local-server load flash:/portalpage.zip
portal local-server url wifi.cliguru.com
portal local-server https ssl-policy cli_ssl port PORT

portal-access-profile name portal_access_profile
portal local-server enable

authentication-profile name portal_authen_profile
portal-access-profile portal_access_profile

authentication-profile name CLIGURU-GUEST
portal-access-profile portal_access_profile

undo http secure-server ssl-policy 
authentication-profile name CLIGURU-GUEST
undo portal-access-profile
portal-access-profile name CLIGURU-GUEST
undo portal local-server enable